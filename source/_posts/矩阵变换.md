---
title: '矩阵变换'
categories: 笔记
copyright: true
reward: true
date: 2020-02-17 21:03:48
tags: Unity
thumbnail:
---

## 开始

> Unity Shader 入门精要 4.5 矩阵的几何意义：变换

## 旋转和缩放矩阵

旋转和缩放矩阵可以用一个3x3矩阵表示

### 缩放矩阵

  $k_x,k_y,k_z$分别表示x,y,z的缩放倍数

$$
\left[
\begin{matrix}
M_{3×3}
\end{matrix}
\right] =
\left[
\begin{matrix}
k_x & 0 & 0\\
0 & k_y & 0\\
0 & 0 & k_z
\end{matrix}
\right]
$$

### 旋转矩阵

- 绕x轴旋转θ度

$$
R_x(θ) =
\left[
\begin{matrix}
1 & 0& 0\\
0 & cosθ & -sinθ\\
0 & sinθ & cosθ
\end{matrix}
\right]
$$
  
- 绕y轴旋转θ度

$$
R_y(θ) =
\left[
\begin{matrix}
cosθ & 0 & sinθ\\
0 & 1 & 0\\
-sinθ & 0 & cosθ
\end{matrix}
\right]
$$

- 绕z轴旋转θ度

$$
R_z(θ) =
\left[
\begin{matrix}
cosθ & -sinθ & 0\\
sinθ & cosθ & 0\\
0 & 0 & 1
\end{matrix}
\right]
$$

旋转矩阵比缩放矩阵难记，但是不难看出其特点:

1. 主对角线$k_x,k_y, k_z$分辨表示x轴，y轴，z轴

2. 绕x轴旋转，则$k_x$=1，且4个旋转参数不在$k_x$所在的行和列。其它轴同理

3. 对于4个旋转参数，无论绕哪个轴，其主对角线的2个参数都为$cosθ$; 次对角线上的2个参数都是$sinθ$, 且符号相反，绕y轴与绕x轴和绕z轴的符号都相反

## 平移矩阵

3x3矩阵只能进行旋转和缩放操作。对于平移操作，需要将其扩展到4x4矩阵。同时， 原来要变换的三维矢量要转换成四维矢量，即**齐次坐标**，方式是: 除$(x,y,z)$外增加一个$w$分量,即$(x,y,z,w)$

- 对于点，即非矢量来说， $w = 1$

- 对于矢量， $w = 0$。因为对于矢量平移是无效的

扩展后的矩阵(以**基础变换矩阵**表示，*即纯平移，纯旋转， 纯缩放的变换矩阵*):

$$
\begin{bmatrix}
M_{3×3} & t_{3×1}\\
0_{1×3} & 1
\end{bmatrix}
$$

左上角的矩阵$M_{3×3}$用于表示旋转和缩放，$t_{3×1}$用于表示平移，$0_{1×3}$是零矩阵，即$0_{1×3}$=[0 0 0]，右下角的元素就是标量1

## 复合矩阵

即把平移、旋转、缩放组合起来的变换过程。

- 绝大多数情况下约定变换的顺序是: 缩放→旋转→平移。
  因为后缩放会导致平移后的坐标发生变化，导致结果不正确。

- 对于旋转顺序，即同时绕多个轴旋转的顺序。
  Unity中的旋转顺序是: z x y
